(this["webpackJsonpbdudb-frontend"]=this["webpackJsonpbdudb-frontend"]||[]).push([[0],{195:function(e,t,a){e.exports=a.p+"static/media/bdu_white_logo.10ca96f4.png"},197:function(e,t,a){e.exports=a.p+"static/media/BDU_memberArea_512.e6068b21.png"},229:function(e,t,a){e.exports=a(496)},239:function(e,t,a){},240:function(e,t,a){},241:function(e,t,a){},242:function(e,t,a){},256:function(e,t,a){},258:function(e,t,a){},259:function(e,t,a){},260:function(e,t,a){},269:function(e,t,a){},307:function(e,t,a){},308:function(e,t,a){},309:function(e,t,a){},310:function(e,t,a){},320:function(e,t,a){},490:function(e,t,a){},491:function(e,t,a){},492:function(e,t,a){},496:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(40),l=a.n(o),c=a(23),s=a(9),i=(a(238),a(239),a(240),a(241),a(49)),u=a(194),m=a(17),d=a(8),p="ADD_BUG",f={isAuthenticated:!1,authenticatedUserId:null,authCheckHasFinished:!1,users:[],expandedUserId:null},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHECK_AUTHENTICATION":return Object(d.a)({},e,{isAuthenticated:t.payload.isAuthenticated,authenticatedUserId:t.payload.authenticatedUserId,authCheckHasFinished:t.payload.authCheckHasFinished});case"LOGOUT":return Object(d.a)({},e,{isAuthenticated:!1,authenticatedUser:{}});case"UPDATE_USER":return Object(d.a)({},e,{users:e.users.map((function(e){return e.id!==t.payload.user.id?e:Object(d.a)({},t.payload.user,{tournaments:e.tournaments})}))});case"SET_USER_LIST":return Object(d.a)({},e,{users:t.payload.users});case"DELETE_REGISTRATION":return Object(d.a)({},e,{users:e.users.map((function(e){return Object(d.a)({},e,{tournaments:e.tournaments.filter((function(e){return e._pivot_id!==t.payload.registrationId}))})}))});case"ADD_REGISTRATION":return Object(d.a)({},e,{users:e.users.map((function(e){return e.id!==t.payload.registration._pivot_user_id?e:Object(d.a)({},e,{tournaments:[].concat(Object(m.a)(e.tournaments),[Object(d.a)({},t.payload.tournament,{},t.payload.registration)])})}))});case"PATCH_REGISTRATION":return Object(d.a)({},e,{users:e.users.map((function(e){return e.tournaments?Object(d.a)({},e,{tournaments:e.tournaments.map((function(e){return e._pivot_id&&e._pivot_id===t.payload.registrationId?Object(d.a)({},e,{},t.payload.registration):e}))}):e}))});case"ADD_TO_USER_ARRAY":var a=e.users.findIndex((function(e){return e.id===t.payload.user.id}))>-1;return a?e:Object(d.a)({},e,{users:[].concat(Object(m.a)(e.users),[t.payload.user])});case"SET_EXPANDED_USER_ID":return Object(d.a)({},e,{expandedUserId:t.payload.userId});default:return e}},g={tournamentList:[],showPreviousTournaments:!1,expandedTournamentId:null},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TOURNAMENT":var a=e.tournamentList.findIndex((function(e){return e.id===t.payload.tournament.id}));if(a>-1){var n=e.tournamentList;return n[a]=t.payload.tournament,Object(d.a)({},e,{tournamentList:n})}return Object(d.a)({},e,{tournamentList:[].concat(Object(m.a)(e.tournamentList),[t.payload.tournament])});case"SET_TOURNAMENT_LIST":return Object(d.a)({},e,{tournamentList:t.payload.tournaments});case"ADD_TOURNAMENT":return Object(d.a)({},e,{tournamentList:[].concat(Object(m.a)(e.tournamentList),[t.payload.tournament])});case"UPDATE_TOURNAMENT":return Object(d.a)({},e,{tournamentList:e.tournamentList.map((function(e){return e.id!==t.payload.tournament.id?e:Object(d.a)({},t.payload.tournament,{users:e.users})}))});case"DELETE_TOURNAMENT":return Object(d.a)({},e,{tournamentList:e.tournamentList.filter((function(e){return e.id!==t.payload.tournamentId}))});case"TOGGLE_SHOW_PREV_TOURNAMENTS":return Object(d.a)({},e,{showPreviousTournaments:!e.showPreviousTournaments});case"DELETE_REGISTRATION":return Object(d.a)({},e,{tournamentList:e.tournamentList.map((function(e){return Object(d.a)({},e,{users:e.users.filter((function(e){return e._pivot_id!==t.payload.registrationId}))})}))});case"ADD_REGISTRATION":return Object(d.a)({},e,{tournamentList:e.tournamentList.map((function(e){return e.id!==t.payload.registration._pivot_tournament_id?e:Object(d.a)({},e,{users:[].concat(Object(m.a)(e.users),[Object(d.a)({},t.payload.user,{},t.payload.registration)])})}))});case"PATCH_REGISTRATION":return Object(d.a)({},e,{tournamentList:e.tournamentList.map((function(e){return Object(d.a)({},e,{users:e.users.map((function(e){return e._pivot_id&&e._pivot_id===t.payload.registrationId?Object(d.a)({},e,{},t.payload.registration):e}))})}))});case"SET_EXPANDED_TOURNAMENT_ID":return Object(d.a)({},e,{expandedTournamentId:t.payload.tournamentId===e.expandedTournamentId?null:t.payload.tournamentId});default:return e}},h={bugList:[]},v=Object(i.c)({user:b,tournament:E,bug:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_BUGS":return Object(d.a)({},e,{bugList:t.payload.bugList});case"SET_BUG_STATUS":return Object(d.a)({},e,{bugList:e.bugList.map((function(e){return e.id===t.payload.bugId?Object(d.a)({},e,{status:t.payload.status}):e}))});case p:return Object(d.a)({},e,{bugList:[].concat(Object(m.a)(e.bugList),[t.payload.newBug])});case"REMOVE_BUG":return Object(d.a)({},e,{bugList:e.bugList.filter((function(e){return e.id!==t.payload.bugId}))});default:return e}}}),N=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,y=Object(i.e)(v,N(Object(i.a)(u.a))),_=a(28),x=a(50),w=(a(242),a(243),a(55)),O=a(4),C=a.n(O),j=a(15),T="https://members-area-server.herokuapp.com",k={INFO:"INFO",SUCCESS:"SUCCESS",WARNING:"WARNING",DANGER:"DANGER"},S={Registered:0,Went:1,"Can Go":2,"Didn\xb4t Go":3},D=[{id:"none",label:"none",canHavePartner:!1},{id:"judge",label:"judge",canHavePartner:!1},{id:"break",label:"break",canHavePartner:!0},{id:"final",label:"final",canHavePartner:!0},{id:"win",label:"win",canHavePartner:!0},{id:"judge2",label:"judge for different institution",canHavePartner:!1},{id:"break2",label:"break for different institution",canHavePartner:!0},{id:"final2",label:"final for different institution",canHavePartner:!0},{id:"win2",label:"win for different institution",canHavePartner:!0},{id:"breakESL",label:"break ESL",canHavePartner:!0},{id:"finalESL",label:"final ESL",canHavePartner:!0},{id:"winESL",label:"win ESL",canHavePartner:!0},{id:"break2ESL",label:"break ESL for different institution",canHavePartner:!0},{id:"final2ESL",label:"final ESL for different institution",canHavePartner:!0},{id:"win2ESL",label:"win ESL for different institution",canHavePartner:!0}],A="judge",R="MMM DD, YYYY",P=function(e,t){switch(t){case k.INFO:w.NotificationManager.info(e);break;case k.SUCCESS:w.NotificationManager.success(e);break;case k.WARNING:w.NotificationManager.warning(e);break;case k.DANGER:w.NotificationManager.error(e)}};function L(e){if(e.tournaments)return e.tournaments.reduce((function(e,t){return e-(t._pivot_price_paid-t._pivot_price_owed)}),0)}var I=function(e){var t,a=e.ort,n=e.startdate,r=e.enddate,o=e.speakerprice,l=e.judgeprice,c=e.teamspots,s=e.judgespots,i=e.rankingvalue,u=e.comments,m=Object(_.a)(e,["ort","startdate","enddate","speakerprice","judgeprice","teamspots","judgespots","rankingvalue","comments"]);return m.users&&(t=m.users.map(F)),Object(d.a)({},m,{location:a,startDate:n,endDate:r,speakerPrice:o,judgePrice:l,teamSpots:c,judgeSpots:s,rankingFactor:i,comment:u,users:t})},F=function(e){var t,a=e.vorname,n=e.name,r=Object(_.a)(e,["vorname","name"]);return r.tournaments&&(t=r.tournaments.map(I)),Object(d.a)({},r,{firstName:a,lastName:n,tournaments:t})};var U,M=function(){return function(e){var t,a,n,r,o,l,c;return C.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,C.a.awrap(fetch("".concat(T,"/currentUser"),{method:"GET",credentials:"include"}));case 2:if(200!==(t=s.sent).status){s.next=22;break}return s.next=6,C.a.awrap(t.json());case 6:return a=s.sent,s.next=9,C.a.awrap(Promise.all([fetch("".concat(T,"/tournament"),{method:"GET",credentials:"include"}),fetch("".concat(T,"/user"),{method:"GET",credentials:"include"})]));case 9:return n=s.sent,s.next=12,C.a.awrap(Promise.all(n.map((function(e){return e.json()}))));case 12:r=s.sent,o=Object(j.a)(r,2),l=o[0],c=o[1],e({type:"SET_USER_LIST",payload:{users:c.map(F)}}),e({type:"ADD_TO_USER_ARRAY",payload:{user:[a].map(F)[0]}}),e({type:"SET_TOURNAMENT_LIST",payload:{tournaments:l.map(I)}}),e({type:"CHECK_AUTHENTICATION",payload:{isAuthenticated:!0,authenticatedUserId:a.id,authCheckHasFinished:!0}}),s.next=23;break;case 22:e({type:"CHECK_AUTHENTICATION",payload:{isAuthenticated:!1,authenticatedUserId:null,authCheckHasFinished:!0}});case 23:case"end":return s.stop()}}))}},B=function(e,t){return function(a){var n,r;return C.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,C.a.awrap(fetch("".concat(T,"/login"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST"},body:JSON.stringify({email:e,password:t})}));case 2:n=o.sent,r=n.json(),200===n.status?a(M()):r.message?P(r.message,k.WARNING):P("Error during login.",k.WARNING);case 5:case"end":return o.stop()}}))}},G=function(e){var t=e.email,a=e.password,n=e.firstName,r=e.lastName,o=e.gender,l=e.food,c=e.signupPassword;return function(e){var s,i;return C.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,C.a.awrap(fetch("".concat(T,"/signup"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST"},body:JSON.stringify({email:t,password:a,vorname:n,name:r,gender:o,food:l,signup_password:c})}));case 2:s=u.sent,i=s.json(),200===s.status?e(M()):i.message?P(i.message,k.WARNING):P("Error during signup.",k.WARNING);case 5:case"end":return u.stop()}}))}},H=function(){return function(e){return fetch("".concat(T,"/logout"),{method:"GET",credentials:"include"}).then((function(t){200===t.status&&e({type:"LOGOUT",payload:{isAuthenticated:!1}})}))}},q=(a(256),a(497)),Y=a(498),W=a(499),V=a(500),J=a(501),z=a(502),X=a(503),K=a(504),$=a(505),Q=a(506),Z=a(195),ee=a.n(Z),te=function(e){var t=e.link,a=e.pathname,n=void 0===a?"/":a,o=e.children,l=void 0===o?[]:o,c=l.map((function(e){return"/".concat(e.props.link.url)||!1})).includes(n);return r.a.createElement("div",{className:"nav-item ".concat(c?"active":""," dropdown ").concat(t.className)},r.a.createElement("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},t.icon,t.title),r.a.createElement("div",{className:"dropdown-menu bg-dark","aria-labelledby":"navbarDropdown"},l))},ae=function(e){var t=e.link,a=e.pathname,n=void 0===a?"/":a,o="/".concat(t.url||"")===n&&!t.onClick;return r.a.createElement("li",{className:"nav-item ".concat(o?"active":"")},t.onClick?r.a.createElement("button",{type:"button",className:"nav-link d-flex align-items-center btn btn-link ".concat(t.className),onClick:t.onClick},t.icon,t.title):r.a.createElement(c.b,{className:"nav-link d-flex align-items-center ".concat(t.className),key:t.title,to:"/".concat(t.url?t.url:"")},t.icon,t.title))},ne=function(e){var t=e.history.location.pathname,a=Object(s.c)(),n=Object(s.d)((function(e){var t=e.user;return{isAuthenticated:t.isAuthenticated,authenticatedUser:t.authenticatedUserId?t.users.find((function(e){var a=e.id;return t.authenticatedUserId===a})):{},isAdmin:!!t.authenticatedUserId&&1===t.users.find((function(e){var a=e.id;return t.authenticatedUserId===a})).position}})),o=n.isAuthenticated,l=n.authenticatedUser,c=n.isAdmin,i=[];if(o?i.push.apply(i,[{title:"Tournaments",icon:r.a.createElement(q.a,{size:18,className:"mr-1"})},{title:"HowTos & Docs",url:"wikiLinks",icon:r.a.createElement(q.a,{size:18,className:"mr-1"})}]):i.push.apply(i,[{title:"Login",url:"login",icon:r.a.createElement(Y.a,{size:18,className:"mr-1"})},{title:"Signup",url:"signup",icon:r.a.createElement(W.a,{size:18,className:"mr-1"})}]),c&&i.push({title:"Admin",icon:r.a.createElement(V.a,{size:18,className:"mr-1"}),children:[{title:"Create Tournament",url:"createTournament",icon:r.a.createElement(J.a,{size:18,className:"mr-1"})},{title:"Members",url:"member",icon:r.a.createElement(z.a,{size:18,className:"mr-1"})}]}),o){var u=L(l);i.push({title:r.a.createElement("span",{className:"badge badge-".concat(u>0?"danger":"info")},Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(u)),icon:r.a.createElement(X.a,{size:18,className:"mr-1"}),className:"ml-md-auto align-collapse-right",children:[{title:"My Tournaments",url:"home",icon:r.a.createElement(K.a,{size:18,className:"mr-1"}),className:"ml-auto"},{title:"Edit Profile",url:"edit",icon:r.a.createElement($.a,{size:18,className:"mr-1"})},{title:"Logout",onClick:function(){a(H())},icon:r.a.createElement(Q.a,{size:18,className:"mr-1"})}]})}return r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark"},r.a.createElement("a",{className:"navbar-brand",href:"#"},r.a.createElement("img",{src:ee.a,className:"mr-1",width:"80",alt:"logo"})),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav w-100"},i.map((function(e){return e.children?r.a.createElement(te,{link:e,pathname:t,key:e.title},e.children.map((function(e){return r.a.createElement(ae,{link:e,pathname:t,key:"".concat(e.url,"_").concat(e.title)})}))):r.a.createElement(ae,{link:e,key:"".concat(e.url,"_").concat(e.title),pathname:t})})))))},re=(a(258),function(){return r.a.createElement("footer",{id:"footer",className:"d-flex justify-content-around align-items-center py-2"},r.a.createElement("span",null,"\xa9 Berlin Debating Union e.V.,",(new Date).getFullYear()),r.a.createElement(c.b,{to:"/bug"},"Feedback / Bugs"))}),oe=(a(259),a(197)),le=a.n(oe),ce=function(){var e=Object(s.c)(),t=Object(n.useState)(""),a=Object(j.a)(t,2),o=a[0],l=a[1],i=Object(n.useState)(""),u=Object(j.a)(i,2),m=u[0],d=u[1];return r.a.createElement("div",{id:"loginPage",className:"container-fluid d-flex flex-column"},r.a.createElement("div",{className:"row d-flex align-items-center justify-content-center py-4"},r.a.createElement("img",{id:"loginMembersAreaImage",src:le.a,alt:""})),r.a.createElement("div",{className:"row d-flex align-items-center justify-content-center py-3"},r.a.createElement("div",{className:"col-lg-4 col-md-5 col-sm-7 col-11 login-box p-4"},r.a.createElement("h4",null,"Login ",r.a.createElement(Y.a,null)),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e(B(o,m))}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",className:"form-control",id:"email",onChange:function(e){l(e.target.value)},name:"email",autoComplete:"username email","aria-describedby":"emailHelp",placeholder:"Enter your email",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",value:m,onChange:function(e){d(e.target.value)},name:"password",autoComplete:"current-password",id:"password",placeholder:"Enter your password",required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-outline-info"},"Login")),r.a.createElement("hr",null),r.a.createElement("p",null,"Forgot your password? ",r.a.createElement(c.b,{to:"/forgot"},"Reset Password")),r.a.createElement("p",null,"Need an account? ",r.a.createElement(c.b,{to:"/signup"},"Signup")))),r.a.createElement("div",{id:"photoCredit",className:"d-flex justify-content-end flex-wrap mt-auto"},"photo credit:\xa0",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.flickr.com/photos/jaehyunlee/"},"Jaehyun Lee"),",\xa0",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.flickr.com/photos/jaehyunlee/33543411320/"},"\xb4\xb4Museum Island\xb4\xb4"),"\xa0is licensed under\xa0",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://creativecommons.org/licenses/by/2.0/"}," ","CC BY 2.0")))},se=a(19),ie=function(e){var t=e.email,a=e.firstName,o=e.lastName,l=e.gender,c=e.food,s=e.context,i=e.handleSubmit,u=Object(n.useState)({email:t||"",password:"",confirmPassword:"",firstName:a||"",lastName:o||"",gender:l||"-",food:c||"",signupPassword:""}),m=Object(j.a)(u,2),p=m[0],f=m[1],b=Object(n.useState)(!1),g=Object(j.a)(b,2),E=g[0],h=g[1],v=Object(n.useRef)(null);function N(e){("confirmPassword"===e.target.name||"password"===e.target.name&&p.confirmPassword)&&h(p.password===e.target.value||p.confirmPassword===e.target.value),f(Object(d.a)({},p,Object(se.a)({},e.target.name,e.target.value)))}var y="form-control";p.confirmPassword.length>0&&(y+=E?" is-valid":" is-invalid");var _="edit"===s,x=(E||_)&&p.email&&p.firstName&&p.lastName&&(p.signupPassword||_);return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),p.password!==p.confirmPassword?v.focus():i(p)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",className:"form-control",value:p.email,onChange:N,id:"email",name:"email",autoComplete:"email","aria-describedby":"emailHelp",placeholder:"Enter your email",required:!0})),_?null:r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",value:p.password,onChange:N,id:"password",name:"password",autoComplete:"password",placeholder:"Enter your password",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"confirmPassword"},"Confirm Password"),r.a.createElement("input",{type:"password",className:y,value:p.confirmPassword,ref:v,onChange:N,id:"confirmPassword",name:"confirmPassword",autoComplete:"confirmPassword",placeholder:"Confirm your password",required:!0}),!E&&p.confirmPassword.length>0?r.a.createElement("small",{className:"text-danger"},"Passwords don\xb4t match."):null)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"firstName"},"First Name"),r.a.createElement("input",{type:"text",className:"form-control",value:p.firstName,onChange:N,id:"firstName",name:"firstName",autoComplete:"given-name",placeholder:"First Name",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"lastName"},"Last Name"),r.a.createElement("input",{type:"text",className:"form-control",value:p.lastName,onChange:N,id:"lastName",name:"lastName",autoComplete:"family-name",placeholder:"Last Name",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"gender"},"Gender"),r.a.createElement("select",{className:"form-control",value:p.gender,onChange:N,id:"gender",name:"gender",required:!0},r.a.createElement("option",{value:"f"},"female"),r.a.createElement("option",{value:"m"},"male"),r.a.createElement("option",{value:"-"},"non-binary"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"food"},"Food Preference"),r.a.createElement("input",{type:"text",className:"form-control",id:"food",name:"food",autoComplete:"food",value:p.food,onChange:N,placeholder:"Veggie? Vegan? Allergies? Don't like tomatoes?"})),"edit"===s?null:r.a.createElement("div",{className:"form-group mt-2"},r.a.createElement("label",{htmlFor:"signupPassword"},"Signup Password"),r.a.createElement("input",{type:"text",className:"form-control",value:p.signupPassword,onChange:N,id:"signupPassword",name:"signupPassword",autoComplete:"signupPassword",placeholder:"Get password from the BDU board members",required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-outline-info",disabled:!x,style:{cursor:x?"pointer":"not-allowed"}},"edit"===s?"Submit":"Signup"))},ue=(a(260),function(){var e=Object(s.c)();return r.a.createElement("div",{id:"signupContainer",className:"d-flex"},r.a.createElement("div",{id:"sideImage",className:"col-5 d-none d-md-flex align-items-center justify-content-center"},r.a.createElement("h1",{className:"text-white text-center"},"Signup and Register for Tournaments with the BDU")),r.a.createElement("div",{className:"d-flex justify-content-center row w-100 align-items-center m-0"},r.a.createElement("div",{className:"col-11 col-sm-10 col-md-9 col-lg-8 col-xl-6 p-4"},r.a.createElement(ie,{handleSubmit:function(t){e(G(t))}}),r.a.createElement("hr",null),r.a.createElement("span",null,"Already have an account? ",r.a.createElement(c.b,{to:"/login"},"Login")))))}),me=a(74),de=a.n(me),pe=a(508),fe=a(509),be=(a(268),a(269),a(6)),ge=a.n(be),Ee=a(61),he=a(21),ve=a.n(he),Ne=a(24),ye=a.n(Ne),_e=a(507),xe=function(e,t){return function(a){var n,r;return C.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,C.a.awrap(fetch("".concat(T,"/registration/").concat(e),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST"},body:JSON.stringify(t)}));case 2:return n=o.sent,o.next=5,C.a.awrap(n.json());case 5:r=o.sent,200===n.status?(P(r.message,k.SUCCESS),a({type:"PATCH_REGISTRATION",payload:{registrationId:e,registration:Object.keys(r.registration).reduce((function(e,t){return Object(d.a)({},e,Object(se.a)({},"_pivot_".concat(t),r.registration[t]))}),{})}})):P(r.message,k.WARNING);case 7:case"end":return o.stop()}}))}},we=function(e){var t=e.tournaments,a=e.history,n=r.a.createRef(),o=Object(s.c)(),l=function(e){Object(Ee.confirmAlert)({title:"Confirm",message:"Are you sure you want to delete this registration?",buttons:[{label:"Yes",class:"btn btn-success",onClick:function(){return o(function(e){return function(t){var a,n;return C.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,C.a.awrap(fetch("".concat(T,"/registration/").concat(e),{method:"DELETE",credentials:"include"}));case 2:return a=r.sent,r.next=5,C.a.awrap(a.json());case 5:n=r.sent,200===a.status?(P(n.message,k.SUCCESS),t({type:"DELETE_REGISTRATION",payload:{registrationId:e}})):P(n.message,k.WARNING);case 7:case"end":return r.stop()}}))}}(e))}},{label:"No",onClick:function(){}}]})},c=[{dataField:"id",text:"ID",hidden:!0},{dataField:"name",text:"Name",sort:!0,style:{wordBreak:"break-word"}},{dataField:"startDate",text:"Date",isDummyField:!0,sort:!0,formatter:function(e,t){return r.a.createElement("span",null,ge()(t.startDate).format(R),r.a.createElement("br",null),ge()(t.endDate).format(R))}},{dataField:"_pivot_role",text:"Role",classes:"d-none d-md-table-cell",headerClasses:"d-none d-md-table-cell",sort:!0},{dataField:"_pivot_price_paid",text:"Debt",isDummyField:!0,sort:!0,formatter:function(e,t){return r.a.createElement("span",{className:t._pivot_price_owed-t._pivot_price_paid>0?"text-danger":null},r.a.createElement(ve.a,{quantity:t._pivot_price_owed-t._pivot_price_paid||0,currency:"EUR"}))}},{dataField:"_pivot_attended",text:"Status",sort:!0,classes:"d-none d-lg-table-cell",headerClasses:"d-none d-lg-table-cell",formatter:function(e){return Object.keys(S).find((function(t){return S[t]===e}))||""}},{dataField:"_pivot_points",text:"Success",sort:!0,classes:"d-none d-lg-table-cell",headerClasses:"d-none d-lg-table-cell"},{dataField:"actions",text:"",isDummyField:!0,formatter:function(e,t){return r.a.createElement("div",{ref:n,className:"d-flex flex-wrap justify-content-center align-items-center"},r.a.createElement(_e.a,{className:"text-danger m-1 cursorPointer",role:"button",onClick:function(e){l(t._pivot_id),e.stopPropagation()}}))}}];return r.a.createElement(ye.a,{bootstrap4:!0,hover:!0,keyField:"id",data:t,columns:c,defaultSorted:[{dataField:"startDate",order:"desc"}],rowEvents:{onClick:function(e,t){var n=t._pivot_id;a.push("registration/".concat(n))}},rowClasses:"cursorPointer",bordered:!1})},Oe=(a(307),function(e){var t=e.xl;return r.a.createElement("div",{className:"".concat(t?"xl ":"","spinner d-flex justify-content-around")},r.a.createElement("div",{className:"bounce1"}),r.a.createElement("div",{className:"bounce2"}),r.a.createElement("div",{className:"bounce3"}))}),Ce=function(e){var t=e.isOpen,a=e.transactionPurpose,n=void 0===a?"You have no current debt to the BDU.":a,o=e.isLoading,l=void 0!==o&&o,c=e.closeModal;return r.a.createElement(de.a,{isOpen:t,className:"transaction-purpose-modal"},r.a.createElement("h5",{className:"mb-3"},"Your transaction purpose"),l&&r.a.createElement(Oe,null),!l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("b",null,n),r.a.createElement(pe.a,{className:"cursorPointer ml-2",onClick:function(){!function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style={position:"absolute",left:"-9999px"},document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),P('Saved "'.concat(e,'" to clipboard.'),k.INFO)}(n)}})),r.a.createElement("button",{className:"btn btn-outline-info float-right",type:"button",onClick:c},"Close")))},je=function(e){var t=e.history,a=Object(n.useState)(!1),o=Object(j.a)(a,2),l=o[0],i=o[1],u=Object(n.useState)(void 0),m=Object(j.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(!1),b=Object(j.a)(f,2),g=b[0],E=b[1],h=Object(s.c)(),v=Object(s.d)((function(e){return e.user.users.find((function(t){var a=t.id;return e.user.authenticatedUserId===a}))})),N=v.tournaments||[];return r.a.createElement("div",{id:"home",className:"container-fluid"},r.a.createElement("div",{className:"side-bar"},r.a.createElement("div",{className:"page-content d-flex align-items-center"},r.a.createElement("div",{className:"name-circle"},v.firstName.substring(0,1),v.lastName.substring(0,1)),r.a.createElement("span",{className:"d-flex flex-column welcome-message"},r.a.createElement("span",null,"Hi,"),r.a.createElement("b",null,v.firstName," ",v.lastName))),r.a.createElement("div",{className:"d-flex align-items-center page-content"},r.a.createElement(c.b,{to:"edit"},r.a.createElement(X.a,{className:"mr-3"}),r.a.createElement("span",null,"Edit profile"))),r.a.createElement("div",{className:"d-flex align-items-center page-content"},r.a.createElement("a",{className:"d-flex align-items-center",role:"button",onClick:function(){var e,t;return C.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return E(!0),i(!0),a.next=4,C.a.awrap(fetch("https://kouqz3b0rd.execute-api.us-east-1.amazonaws.com/prod/gettransactionpurpose?userId=".concat(v.id)));case 4:if(200!==(e=a.sent).status){a.next=10;break}return a.next=8,C.a.awrap(e.json());case 8:t=a.sent,p(t);case 10:E(!1);case 11:case"end":return a.stop()}}))}},r.a.createElement(fe.a,{className:"mr-3"}),r.a.createElement("span",null,"Get transaction purpose"))),r.a.createElement("div",{className:"d-flex align-items-center page-content mt-4"},r.a.createElement("a",{className:"d-flex align-items-center",role:"button",onClick:function(){h(H())}},r.a.createElement(Q.a,{className:"mr-3"}),r.a.createElement("span",null,"Logout"))),r.a.createElement("div",{className:"d-flex align-items-center page-content mt-4"},r.a.createElement("a",{role:"button",onClick:function(){h(H())}},r.a.createElement("i",{className:"fas fa-sign-out-alt mr-3"}),r.a.createElement("span",null,"Logout")))),r.a.createElement("div",{className:"page-content"},r.a.createElement("h1",{className:"py-3"}," My Tournaments"),N.length?r.a.createElement(we,{tournaments:N,history:t}):r.a.createElement("h4",null,"Your registered tournaments will be listed here.")),r.a.createElement("div",{className:"page-content"},r.a.createElement("h2",{className:"py-3"}," My Tournaments"),N.length?r.a.createElement(we,{tournaments:N,history:t}):r.a.createElement("h4",null,"Your registered tournaments will be listed here.")),r.a.createElement(Ce,{isOpen:l,transactionPurpose:d,isLoading:g,closeModal:function(){i(!1)}}))},Te=function(){var e=Object(s.d)((function(e){var t=e.user;return t.users.find((function(e){var a=e.id;return t.authenticatedUserId===a}))})),t=e.id,a=e.email,n=e.firstName,o=e.lastName,l=e.gender,c=e.food,i=Object(s.c)();return r.a.createElement("div",{className:"container-fluid page-content px-5"},r.a.createElement("h2",null,"Edit your profile information"),r.a.createElement(ie,{context:"edit",handleSubmit:function(e){var a=e.email,n=e.firstName,r=e.lastName,o=e._gender,l=e._food;i(function(e){var t=e.userId,a=e.email,n=e.firstName,r=e.lastName,o=e.gender,l=e.food,c=e.newTournamentCount;return function(e){var s,i,u,m;return C.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,C.a.awrap(fetch("".concat(T,"/user/").concat(t),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"PUT"},body:JSON.stringify({email:a,vorname:n,name:r,gender:o,food:l,new_tournament_count:c})}));case 2:return s=d.sent,d.next=5,C.a.awrap(s.json());case 5:i=d.sent,u=i.user,m=i.message,200===s.status?(P(m,k.SUCCESS),e({type:"UPDATE_USER",payload:{user:u}})):P(m||"Error during signup.",k.WARNING);case 9:case"end":return d.stop()}}))}}({userId:t,email:a,firstName:n,lastName:r,gender:o,food:l}))},email:a,firstName:n,lastName:o,gender:l,food:c}))},ke=(a(308),a(2)),Se=a.n(ke),De=a(511),Ae=a(512),Re=a(25),Pe=a(26),Le=a(47),Ie=a(46),Fe=a(48),Ue=a(510),Me=(a(309),function(e){function t(){return Object(Re.a)(this,t),Object(Le.a)(this,Object(Ie.a)(t).apply(this,arguments))}return Object(Fe.a)(t,e),Object(Pe.a)(t,[{key:"handleToggleCollapse",value:function(e){var t=this.props.tableName,a=window.$(".collapse.show"),n=window.$("#rowCollapse_".concat(e)),r=window.$("#BodyRow_".concat(t,"_").concat(e)),o=0;a.length&&a.offset().top<r.offset().top&&(o=a.height()),a.collapse("hide"),n.collapse("toggle"),window.$("html, body").stop().animate({scrollTop:r.offset().top-o},700)}},{key:"render",value:function(){var e=this,t=this.props,a=t.tableName,n=t.headColumns,o=t.bodyRows,l=t.striped,c=t.hover,s=t.collapse,i=t.sortColumn,u=t.actionOnRowClick;this.handleToggleCollapse=this.handleToggleCollapse.bind(this);var m="";return l&&(m+=" flex-table-striped"),c&&(m+=" flex-table-hover"),n||(m+=" flex-table-columnHead"),u&&(m+=" cursorPointer"),r.a.createElement("div",{key:a,className:"flex-table"},n?r.a.createElement("div",{className:"flex-table-row flex-table-head"},n.map((function(e,t){return r.a.createElement("div",{key:e,className:"flex-table-cell"},r.a.createElement("div",null,i?r.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-info",onClick:function(){i(t)}},e):e))}))):null,o.map((function(t,n){return r.a.createElement("div",{role:"button",key:"BodyRow_".concat(n),id:"BodyRow_".concat(a,"_").concat(n),onClick:u?function(){u(n)}:null,className:m},r.a.createElement("div",{role:"row",className:s?"flex-table-row cursorPointer":"flex-table-row",onClick:s?function(){e.handleToggleCollapse(n)}:null},t.map((function(e,t){return r.a.createElement("div",{key:"BodyColumn_".concat(t),className:"flex-table-cell"},e)}))),s?r.a.createElement("div",{id:"rowCollapse_".concat(n),className:"collapse"},r.a.createElement("div",{className:"w-100 position-relative"},r.a.createElement(Ue.a,{role:"button",onClick:function(){e.handleToggleCollapse(n)}}),s[n])):null)})))}}]),t}(n.Component)),Be=a(41),Ge={register:function(e){var t=e.tournament,a=e.userId,n=e.role,r=e.comment,o=e.independent,l=e.funding,c=e.partner1,s=e.partner2,i=e.teamName;return function(e,u){var m,p;return C.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,C.a.awrap(fetch("".concat(T,"/registration"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST"},body:JSON.stringify({tournament_id:t.id,user_id:a,role:n,comment:r,is_independent:o,funding:l,partner1:c,partner2:s,teamname:i})}));case 2:return m=f.sent,f.next=5,C.a.awrap(m.json());case 5:p=f.sent,200===m.status?(e({type:"ADD_REGISTRATION",payload:{registration:Object.keys(p.registration).reduce((function(e,t){return Object(d.a)({},e,Object(se.a)({},"_pivot_".concat(t),p.registration[t]))}),{}),user:u().user.users.find((function(e){return e.id===p.registration.user_id})),tournament:u().tournament.tournamentList.find((function(e){return e.id===p.registration.tournament_id}))}}),P(p.message,k.SUCCESS)):P(p.message,k.WARNING);case 7:case"end":return f.stop()}}))}}},He=function(e){function t(){var e;return Object(Re.a)(this,t),(e=Object(Le.a)(this,Object(Ie.a)(t).call(this))).state={role:"judge",partner1:"-",partner2:"-",teamName:"",comment:""},e.handleChange=e.handleChange.bind(Object(Be.a)(e)),e.handlePostRegister=e.handlePostRegister.bind(Object(Be.a)(e)),e}return Object(Fe.a)(t,e),Object(Pe.a)(t,[{key:"handleChange",value:function(e){var t={};t[e.target.name]=e.target.value,this.setState(t)}},{key:"handlePostRegister",value:function(e){e.preventDefault();var t=this.props,a=t.tournament,n=t.user,r=t.register;Se()("#registrationModal_".concat(a.id)).modal("hide");var o=this.state,l=o.role,c=o.partner1,s=o.partner2,i=o.teamName,u=o.comment;r({tournament:a,userId:n.id,role:l,comment:u,independent:0,funding:0,partner1:c,partner2:s,teamName:i})}},{key:"render",value:function(){var e=this.state,t=e.role,a=e.partner1,n=e.partner2,o=e.teamName,l=e.comment,c=this.props,s=c.tournament,i=c.users;return r.a.createElement("div",{className:"modal fade text-body",id:"registrationModal_".concat(s.id),tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("form",{onSubmit:this.handlePostRegister},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalCenterTitle"},"Register for ",s.name),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"roleSelect"},"Register as"),r.a.createElement("select",{className:"form-control",id:"roleSelect",name:"role",value:t,onChange:this.handleChange},r.a.createElement("option",{value:"judge"},"Judge"),r.a.createElement("option",{value:"speaker"},"Speaker"))),"speaker"===t?r.a.createElement("div",{className:"form-group d-flex flex-column"},r.a.createElement("label",{htmlFor:"partner1Select"},"Teammate"),r.a.createElement("select",{className:"form-control",id:"partner1Select",name:"partner1",value:a,onChange:this.handleChange},r.a.createElement("option",{value:"-"},"None"),i.map((function(e){return r.a.createElement("option",{key:"partner1List_".concat(e.id),value:e.id},"".concat(e.firstName," ").concat(e.lastName))}))),r.a.createElement("small",null,"Don\xb4t have a team partner yet? No problem.")):null,"speaker"===t&&a&&"-"!==a&&!["BPS","BP"].includes(s.format)?r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"partner2Select"},"Teammate 2"),r.a.createElement("select",{className:"form-control",id:"partner2Select",name:"partner2",value:n,onChange:this.handleChange},r.a.createElement("option",{value:"-"},"None"),i.map((function(e){return r.a.createElement("option",{key:"partner1List_".concat(e.id),value:e.id,disabled:e.id===parseInt(a,10)},"".concat(e.firstName," ").concat(e.lastName))})))):null,"speaker"===t?r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"teamName"},"Team Name"),r.a.createElement("input",{className:"form-control",id:"teamName",name:"teamName",placeholder:"Be funny, creative, critical, ...",value:o,onChange:this.handleChange})):null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"comment"},"Comment"),r.a.createElement("input",{className:"form-control",id:"comment",name:"comment",placeholder:"Anything you want us to know?",value:l,onChange:this.handleChange}))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary","data-dismiss":"modal"},"Close"),r.a.createElement("button",{type:"submit",className:"btn btn-success"},"Register"))))))}}]),t}(n.Component),qe=Object(s.b)((function(e){var t=e.user;return{user:t.users.find((function(e){var a=e.id;return t.authenticatedUserId===a}))}}),Ge)(He),Ye=function(e,t){var a=t.location,n=t.startDate,r=t.endDate,o=t.rankingFactor,l=t.speakerPrice,c=t.judgePrice,s=t.teamSpots,i=t.judgeSpots,u=t.comment,m=Object(_.a)(t,["location","startDate","endDate","rankingFactor","speakerPrice","judgePrice","teamSpots","judgeSpots","comment"]);return function(t){var p,f,b,g;return C.a.async((function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,C.a.awrap(fetch("".concat(T,"/tournament/").concat(e),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"PUT"},body:JSON.stringify(Object(d.a)({},m,{ort:a,startdate:n,enddate:r,speakerprice:l,judgeprice:c,teamspots:s,judgespots:i,rankingvalue:o,comments:u}))}));case 2:return p=E.sent,E.next=5,C.a.awrap(p.json());case 5:f=E.sent,b=f.message,g=f.tournament,200===p.status?(t({type:"UPDATE_TOURNAMENT",payload:{tournament:g}}),P(b,k.SUCCESS)):P(b,k.WARNING);case 9:case"end":return E.stop()}}))}},We=function(e){var t=e.tournament,a=e.history,n=Object(s.d)((function(e){var t=e.user;return{isAdmin:!!t.authenticatedUserId&&1===t.users.find((function(e){var a=e.id;return t.authenticatedUserId===a})).position,users:t.users}})),o=n.isAdmin,l=n.users,c=Object(s.c)(),i=t.users.length?function(e){var n=t.users[e]._pivot_id;a.push("/registration/".concat(n))}:null,u=function(e){Object(Ee.confirmAlert)({title:"Confirm",message:"Are you sure you want to delete this tournament?",buttons:[{label:"Yes",onClick:function(){return c(function(e){return function(t){var a,n;return C.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,C.a.awrap(fetch("".concat(T,"/tournament/").concat(e),{method:"DELETE",credentials:"include"}));case 2:return a=r.sent,r.next=5,C.a.awrap(a.json());case 5:n=r.sent,200===a.status?(P(n.message,k.SUCCESS),t({type:"DELETE_TOURNAMENT",payload:{tournamentId:e}})):P(n.message,k.WARNING);case 7:case"end":return r.stop()}}))}}(e))}},{label:"No",onClick:function(){}}]})},m=ge()(t.startDate).format(R),d=ge()(t.endDate).format(R),p=t.link;if(t.link.includes("http://")||t.link.includes("https://")){var f=t.link.includes("facebook")?r.a.createElement(De.a,null):r.a.createElement(Ae.a,null);p=r.a.createElement("a",{className:"text-white",href:t.link,target:"_blank",rel:"noopener noreferrer"},f)}var b=[t.location?["Location",t.location]:null,t.startDate?["Date","".concat(m," - ").concat(d)]:null,t.format?["Format",t.format]:null,t.teamspots?["Team Spots",t.teamspots]:null,t.judgespots?["Judge Spots",t.judgespots]:null,t.speakerprice?["Price Speaker",r.a.createElement(ve.a,{quantity:t.speakerprice||0,currency:"EUR",key:t.speakerprice})]:null,t.judgeprice?["Price Judge",r.a.createElement(ve.a,{quantity:t.judgeprice||0,currency:"EUR",key:t.judgeprice})]:null,t.deadline?["Deadline to register",ge()(t.deadline).format(R)]:null,t.accommodation?["Accommodation",t.accommodation]:null,t.rankingvalue?["BDU ranking factor:",t.rankingvalue]:null,t.league?["League",t.league]:null,t.link?["Link",p]:null,t.comment?["Comments",t.comment]:null].filter((function(e){return e})),g=t.users.length?t.users.map((function(e){return["".concat(e.firstName," ").concat(e.lastName),e._pivot_role,e._pivot_teamname,e._pivot_comment,ge()(e._pivot_created_at).format("LLL")]})).sort((function(e,t){var a=Object(j.a)(e,6)[5],n=Object(j.a)(t,6)[5];return a===n?0:ge()(a,"LLL").isAfter(ge()(n,"LLL"))?1:-1})):null;return r.a.createElement("div",{id:t.id,className:"collapseContainer"},r.a.createElement("div",{className:"collapseTournamentContainer"},r.a.createElement("h3",{className:"pr-4 pr-sm-0"},t.name),o?r.a.createElement("div",{className:"d-flex mb-1"},r.a.createElement("button",{onClick:function(){var e;e=t.id,a.push("/tournament/".concat(e))},type:"button",className:"btn btn-outline-light"},"Edit"),r.a.createElement("button",{onClick:function(){u(t.id)},type:"button",className:"btn btn-outline-danger ml-2"},"Delete")):null,r.a.createElement(Me,{key:"tournamentTable_".concat(t.name),tableName:"tournamentTable_".concat(t.name),bodyRows:b,striped:!0}),r.a.createElement("div",{className:"d-flex mt-4"},r.a.createElement("button",{type:"button",className:"btn btn-outline-light btn-lg","data-toggle":"tooltip",title:"Add to calendar"},r.a.createElement(J.a,null)),r.a.createElement("button",{type:"button",className:"btn btn-danger btn-lg ml-auto registerButton",onClick:function(){var e;e=t.id,Se()("#registrationModal_".concat(e)).modal("toggle")}},"Register"))),r.a.createElement("div",{className:"collapseUserContainer"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("h3",null,"Registered Users")),t.users.length?r.a.createElement(Me,{key:"userTable_".concat(t.name),tableName:"userTable_".concat(t.name),headColumns:["Name","Role","Team","Comment","Registered at"],actionOnRowClick:i,bodyRows:g,striped:!0}):r.a.createElement("p",null,"There are no registrations for this tournament yet.")),r.a.createElement(qe,{tournament:t,users:l}))},Ve=[{dataField:"id",text:"ID",hidden:!0},{dataField:"name",text:"Name",sort:!0,style:{wordBreak:"break-word"}},{dataField:"startDate",isDummyField:!0,text:"Date",sort:!0,sortFunc:function(e,t,a){return"asc"===a?ge()(e).isAfter(ge()(t))?1:ge()(e).isBefore(ge()(t))?-1:0:ge()(e).isAfter(ge()(t))?-1:ge()(e).isBefore(ge()(t))?1:0},formatter:function(e,t){return"".concat(ge()(t.startDate).format(R)," - ").concat(ge()(t.endDate).format(R))}},{dataField:"location",text:"Location",sort:!0,style:{wordBreak:"break-word"}},{dataField:"language",text:"Language",sort:!0,classes:"d-none d-lg-table-cell",headerClasses:"d-none d-lg-table-cell",formatter:function(e,t){return t.language.toUpperCase()}},{dataField:"users",text:"Users",sort:!0,sortFunc:function(e,t,a){return"asc"===a?e.length-t.length:t.length-e.length},classes:"d-none d-lg-table-cell",headerClasses:"d-none d-lg-table-cell",formatter:function(e){return e.length}}],Je=function(e){var t=e.history,a=Object(s.d)((function(e){var t=e.tournament,a=t.tournamentList,n=t.showPreviousTournaments,r=t.expandedTournamentId;return{tournaments:n?a:a.filter((function(e){var t=e.endDate;return ge()(t).isAfter(ge()())})),expandedTournamentId:r}})),o=a.expandedTournamentId,l=a.tournaments,c=Object(s.c)(),i=Object(n.useCallback)((function(){return c({type:"TOGGLE_SHOW_PREV_TOURNAMENTS"})}),[c]),u={renderer:function(e){return o?r.a.createElement(We,{tournament:e,history:t}):null},onlyOneExpanding:!0,onExpand:function(e,t,a,n){var r;if(r=t?e.id:null,c({type:"SET_EXPANDED_TOURNAMENT_ID",payload:{tournamentId:r}}),t){var o=n.target;if(!o)return;setTimeout((function(){o.scrollIntoView({behavior:"smooth",block:"start"})}),1)}},expanded:[o]};return r.a.createElement("div",{className:"container-fluid page-content"},r.a.createElement("h2",{className:"mb-4"},"BDU Tournaments"),r.a.createElement(ye.a,{bootstrap4:!0,hover:!0,keyField:"id",data:l,columns:Ve,defaultSorted:[{dataField:"startDate",order:"desc"}],rowClasses:"cursorPointer",expandRow:u,bordered:!1}),r.a.createElement("div",{className:"d-flex align-items-center flex-column flex-sm-row mt-4"},r.a.createElement("button",{type:"button",className:"btn btn-outline-info",onClick:i},l.find((function(e){var t=e.endDate;return ge()(t).isBefore(ge()())}))?"Hide ":"Show ","previous tournaments")))},ze=(a(310),function(e){var t=e.handleSubmit,a=Object(_.a)(e,["handleSubmit"]),o=(new Date).toISOString().substr(0,10),l={name:a.name||"",location:a.location||"",accommodation:a.accommodation||"",startDate:a.startDate||o,endDate:a.endDate||o,deadline:a.deadline||o,format:a.format||"",language:a.language||"",league:a.league||"",rankingFactor:a.rankingFactor||0,speakerPrice:a.speakerPrice||0,judgePrice:a.judgePrice||0,teamSpots:a.teamSpots||0,judgeSpots:a.judgeSpots||0,link:a.link||"",comment:a.comment||""},c=Object(n.useState)(l),s=Object(j.a)(c,2),i=s[0],u=s[1];function m(e){u(Object(d.a)({},i,Object(se.a)({},e.target.name,e.target.value)))}var p=i.name&&i.startDate&&i.endDate&&i.rankingFactor;return r.a.createElement("form",{onSubmit:function(){t(i)},id:"tournamentForm"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-10 d-flex flex-wrap"},r.a.createElement("div",{className:"form-group px-lg-3"},r.a.createElement("label",null,"Name",r.a.createElement("input",{type:"name",className:"form-control",value:i.name,onChange:m,id:"email",name:"name",autoComplete:"name",placeholder:"Name",required:!0}))),r.a.createElement("div",{className:"form-group px-lg-3"},r.a.createElement("label",null,"Location",r.a.createElement("input",{type:"location",className:"form-control",value:i.location,onChange:m,id:"location",name:"location",autoComplete:"location",placeholder:"Location"}))),r.a.createElement("div",{className:"form-group px-lg-3"},r.a.createElement("label",null,"Start Date",r.a.createElement("input",{type:"date",className:"form-control",value:i.startDate,onChange:m,id:"startDate",name:"startDate",autoComplete:"startDate",placeholder:"Start Date",required:!0}))),r.a.createElement("div",{className:"form-group px-lg-3"},r.a.createElement("label",null,"End Date",r.a.createElement("input",{type:"date",className:"form-control",value:i.endDate,onChange:m,id:"endDate",name:"endDate",autoComplete:"endDate",placeholder:"End Date",required:!0}))),r.a.createElement("div",{className:"form-group px-lg-3"},r.a.createElement("label",null,"Deadline",r.a.createElement("input",{type:"date",className:"form-control",value:i.deadline,onChange:m,id:"deadline",name:"deadline",autoComplete:"deadline",placeholder:"Dealine"}))),r.a.createElement("div",{className:"form-group px-lg-3"},r.a.createElement("label",null,"Format",r.a.createElement("input",{type:"text",className:"form-control",value:i.format,onChange:m,id:"format",name:"format",autoComplete:"format",placeholder:"Format"}))),r.a.createElement("div",{className:"form-group px-lg-3"},r.a.createElement("label",null,"Language",r.a.createElement("select",{className:"form-control",value:i.language,onChange:m,id:"language",name:"language"},r.a.createElement("option",{value:"formValues.de"},"German"),r.a.createElement("option",{value:"formValues.en"},"English"),r.a.createElement("option",{value:"formValues.-"},"other")))),r.a.createElement("div",{className:"form-group px-lg-3"},r.a.createElement("label",null,"BDU Ranking Factor",r.a.createElement("input",{type:"number",className:"form-control",value:i.rankingFactor,onChange:m,id:"rankingFactor",name:"rankingFactor",autoComplete:"rankingFactor",placeholder:"BDU Ranking Factor"}))),r.a.createElement("div",{className:"form-group px-lg-3"},r.a.createElement("label",null,"Accommodation",r.a.createElement("input",{type:"text",className:"form-control",id:"accommodation",name:"accommodation",autoComplete:"accommodation",value:i.accommodation,onChange:m,placeholder:"Accommodation"}))),r.a.createElement("div",{className:"form-group px-lg-3"},r.a.createElement("label",null,"League",r.a.createElement("input",{type:"text",className:"form-control",value:i.league,onChange:m,id:"league",name:"league",autoComplete:"league",placeholder:"League"}))),r.a.createElement("div",{className:"form-group px-lg-3"},r.a.createElement("label",null,"Price for Speakers in \u20ac",r.a.createElement("input",{type:"number",className:"form-control",value:i.speakerPrice,onChange:m,id:"speakerPrice",name:"speakerPrice",autoComplete:"speakerPrice",placeholder:"Price for Speakers"}))),r.a.createElement("div",{className:"form-group px-lg-3"},r.a.createElement("label",null,"Price for Judges in \u20ac",r.a.createElement("input",{type:"number",className:"form-control",value:i.judgePrice,onChange:m,id:"judgePrice",name:"judgePrice",autoComplete:"judgePrice",placeholder:"Price for Judges"}))),r.a.createElement("div",{className:"form-group px-lg-3"},r.a.createElement("label",null,"Team Spots",r.a.createElement("input",{type:"number",className:"form-control",value:i.teamSpots,onChange:m,id:"teamSpots",name:"teamSpots",autoComplete:"teamSpots",placeholder:"Team Spots"}))),r.a.createElement("div",{className:"form-group px-lg-3"},r.a.createElement("label",null,"Judges Spots",r.a.createElement("input",{type:"number",className:"form-control",value:i.judgeSpots,onChange:m,id:"judgeSpots",name:"judgeSpots",autoComplete:"judgeSpots",placeholder:"Judges Spots"}))),r.a.createElement("div",{className:"form-group px-lg-3"},r.a.createElement("label",null,"Link",r.a.createElement("input",{type:"url",className:"form-control",value:i.link,onChange:m,id:"link",name:"link",autoComplete:"link",placeholder:"Link"}))),r.a.createElement("div",{className:"form-group px-lg-3"},r.a.createElement("label",null,"Comment",r.a.createElement("input",{type:"text",className:"form-control",value:i.comment,onChange:m,id:"comment",name:"comment",autoComplete:"comment",placeholder:"Comment"}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-10"},r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-outline-info ml-3",disabled:!p,style:{cursor:p?"pointer":"not-allowed"}},"Submit"))))}),Xe=function(){var e=Object(s.c)();return r.a.createElement("div",{className:"container-fluid page-content"},r.a.createElement("h2",{className:"mb-4"},"Create New Tournament"),r.a.createElement(ze,{handleSubmit:function(t){e(function(e){var t=e.location,a=e.startDate,n=e.endDate,r=e.rankingFactor,o=e.speakerPrice,l=e.judgePrice,c=e.teamSpots,s=e.judgeSpots,i=e.comment,u=Object(_.a)(e,["location","startDate","endDate","rankingFactor","speakerPrice","judgePrice","teamSpots","judgeSpots","comment"]);return function(e){var m,p,f,b;return C.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,C.a.awrap(fetch("".concat(T,"/tournament"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST"},body:JSON.stringify(Object(d.a)({},u,{ort:t,startdate:a,enddate:n,speakerprice:o,judgeprice:l,teamspots:c,judgespots:s,rankingvalue:r,comments:i}))}));case 2:return m=g.sent,g.next=5,C.a.awrap(m.json());case 5:p=g.sent,f=p.message,b=p.tournament,200===m.status?(P(f,k.SUCCESS),e({type:"ADD_TOURNAMENT",payload:{tournament:Object(d.a)({},b,{users:[]})}})):P(f,k.WARNING);case 9:case"end":return g.stop()}}))}}(t))}}))},Ke=function(e){var t=e.match,a=parseInt(t.params.id,10),o=Object(s.d)((function(e){return e.tournament})).tournamentList,l=o.find((function(e){return e.id===a})),c=Object(s.c)();if(Object(n.useEffect)((function(){o.findIndex((function(e){return e.id===a}))<0&&c(function(e){return function(t){var a,n;return C.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,C.a.awrap(fetch("".concat(T,"/tournament/").concat(e),{method:"GET",credentials:"include"}));case 2:200===(a=r.sent).status&&(n=a.json(),t({type:"GET_TOURNAMENT",payload:{tournament:Object(d.a)({},n,{location:n.ort,startDate:n.startdate,endDate:n.enddate,speakerPrice:n.speakerprice,judgePrice:n.judgeprice,teamSpots:n.teamspots,judgeSpots:n.judgespots,rankingFactor:n.rankingvalue,comment:n.comments})}}));case 4:case"end":return r.stop()}}))}}(a))}),[]),!l)return r.a.createElement(Oe,null);var i=l.startDate,u=l.endDate,m=l.deadline,p=Object(_.a)(l,["startDate","endDate","deadline"]);return r.a.createElement("div",{className:"container-fluid page-content"},r.a.createElement("h2",{className:"mb-4"},"Edit Tournament"),r.a.createElement(ze,Object.assign({handleSubmit:function(e){c(Ye(a,e))},startDate:i?new Date(i).toISOString().substr(0,10):i,endDate:u?new Date(u).toISOString().substr(0,10):u,deadline:m?new Date(m).toISOString().substr(0,10):m},p)))},$e=function(e){var t=e.history,a=e.user,n=Object(s.c)(),o=[["User ID",a.id],["Email",a.email],["Last Debt Mail",ge()(a.last_mail).format(R)],["Total Debt",r.a.createElement("span",{className:a.totalDebt>0?"text-danger":null},r.a.createElement(ve.a,{quantity:a.totalDebt||0,currency:"EUR"}))]],l=[{dataField:"id",text:"ID",hidden:!0},{dataField:"name",text:"Name",sort:!0},{dataField:"startDate",text:"Date",classes:"d-none d-sm-table-cell",headerClasses:"d-none d-sm-table-cell",sort:!0,formatter:function(e){return ge()(e).format(R)}},{dataField:"_pivot_role",text:"Role",classes:"d-none d-md-table-cell",headerClasses:"d-none d-md-table-cell",sort:!0},{dataField:"debt",isDummyField:!0,text:"Debt",classes:"text-right text-sm-left",headerClasses:"text-right text-sm-left",formatter:function(e,t){return r.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},r.a.createElement("span",{className:t._pivot_price_owed-t._pivot_price_paid>0?"text-danger":null},r.a.createElement(ve.a,{quantity:t._pivot_price_owed-t._pivot_price_paid||0,currency:"EUR"}),r.a.createElement("button",{type:"button",className:"btn btn-outline-light btn-sm ml-2 px-2",onClick:function(e){e.stopPropagation(),n(xe(t._pivot_id,{price_paid:t._pivot_price_owed}))}},"\u20ac\u200e")))}},{dataField:"_pivot_transaction_date",text:"Transaction Date",sort:!0,classes:"d-none d-lg-table-cell",headerClasses:"d-none d-lg-table-cell",formatter:function(e){return e?ge()(e).format(R):null}}],c={onClick:function(e,a){var n=a._pivot_id;t.push("registration/".concat(n))}};return r.a.createElement("div",{id:a.id,className:"d-flex flex-column flex-xl-row p-2 p-md-3 pd-lg-4"},r.a.createElement("div",{className:"d-flex flex-column p-0 col-md-8 col-lg-6 col-xl-4"},r.a.createElement("h3",{className:"pr-4 pr-sm-0"},a.firstName," ",a.lastName),r.a.createElement(Me,{key:"userTable_".concat(a.id),tableName:"userTable_".concat(a.id),bodyRows:o,striped:!0})),r.a.createElement("div",{className:"d-flex flex-column mt-5 mt-xl-0 ml-xl-4"},r.a.createElement("div",null,r.a.createElement("h3",null,"Registrations")),a.tournaments.length?r.a.createElement(ye.a,{bootstrap4:!0,keyField:"id",data:a.tournaments,columns:l,defaultSorted:[{dataField:"startDate",order:"desc"}],rowEvents:c,rowClasses:"cursorPointer",bordered:!1}):r.a.createElement("p",null,a.firstName," has no registrations yet.")))},Qe=[{dataField:"id",text:"ID",hidden:!0},{dataField:"firstName",isDummyField:!0,text:"Name",sort:!0,formatter:function(e,t){return"".concat(t.firstName," ").concat(t.lastName)}},{dataField:"totalDebt",text:"Debt",sort:!0,formatter:function(e){return r.a.createElement("span",{className:e>0?"text-danger":null},r.a.createElement(ve.a,{quantity:e||0,currency:"EUR"}))}},{dataField:"totalTournaments",text:"Tournaments",classes:"d-none d-lg-table-cell",headerClasses:"d-none d-lg-table-cell",sort:!0},{dataField:"judgingRatio",text:"Judging Ratio",sort:!0},{dataField:"totalPoints",text:"Points",sort:!0,classes:"d-none d-lg-table-cell",headerClasses:"d-none d-lg-table-cell"},{dataField:"last_login",text:"Last Login",classes:"d-none d-lg-table-cell",headerClasses:"d-none d-lg-table-cell",sort:!0,formatter:function(e){return ge()(e).format("LLL")}}],Ze=function(e){var t=e.history,a=Object(s.d)((function(e){return{users:e.user.users,expandedUserId:e.user.expandedUserId}})),n=a.users,o=a.expandedUserId,l=n.map((function(e){var t=e.tournaments.reduce((function(e,t){return e+(ge()(t.startDate).isBefore(ge()().subtract(1,"years"))?0:t._pivot_points)}),0),a=e.tournaments.length||0,n=e.tournaments.filter((function(e){return e._pivot_role===A})).length||0,r=Math.round(100*n/a)||-1,o=L(e);return Object(d.a)({},e,{totalPoints:t,totalTournaments:a,judgingRatio:r,totalDebt:o})})),c=Object(s.c)(),i={renderer:function(e){return r.a.createElement($e,{key:e.id,user:e,history:t})},onlyOneExpanding:!0,expanded:[o],onExpand:function(e,t,a,n){var r;if(r=t?e.id:null,c({type:"SET_EXPANDED_USER_ID",payload:{userId:r}}),t){var o=n.target;if(!o)return;setTimeout((function(){o.scrollIntoView({behavior:"smooth",block:"start"})}),1)}}};return r.a.createElement("div",{className:"container-fluid page-content"},r.a.createElement("h2",{className:"mb-4"},"MembersList"),r.a.createElement(ye.a,{bootstrap4:!0,hover:!0,keyField:"id",data:l,columns:Qe,defaultSorted:[{dataField:"totalDebt",order:"desc"}],rowClasses:"cursorPointer",expandRow:i,bordered:!1}))},et=a(16),tt=a.n(et),at=(a(320),function(e){function t(e){var a;return Object(Re.a)(this,t),(a=Object(Le.a)(this,Object(Ie.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(Be.a)(a)),a}return Object(Fe.a)(t,e),Object(Pe.a)(t,[{key:"handleChange",value:function(e){e.persist();var t=this.props,a=t.handleChange,n=t.fieldName,r=t.type;clearTimeout(U),U=setTimeout((function(){a(["attended","partner1","partner2"].includes(n)?parseInt(e.target.value,10):r===et.Type.CHECKBOX?e.target.checked?1:0:e.target.value,e.target.name)}),r===et.Type.SELECT?0:500)}},{key:"render",value:function(){var e=this.props,t=e.type,a=e.fieldName,n=e.options,o=e.fieldValue,l=this.props.value;switch(null!==o&&(l=o),t){case et.Type.TEXT:return r.a.createElement("input",{name:a,onChange:this.handleChange,className:"form-control",type:"text",defaultValue:l});case et.Type.CHECKBOX:return r.a.createElement("input",{name:a,onChange:this.handleChange,type:"checkbox",defaultChecked:!!l});case et.Type.SELECT:return r.a.createElement("select",{name:a,onChange:this.handleChange,defaultValue:l,className:"form-control"},n.map((function(e){var t=e.id,a=e.label;return r.a.createElement("option",{key:t,value:t},a)})));default:return r.a.createElement("input",{className:"form-control",type:"text",defaultValue:l})}}}]),t}(n.Component)),nt=at;at.defaultProps={fieldValue:null,options:[]};var rt,ot={patchRegistration:xe},lt=function(e){function t(e){var a;return Object(Re.a)(this,t),(a=Object(Le.a)(this,Object(Ie.a)(t).call(this,e))).handleRegUpdate=a.handleRegUpdate.bind(Object(Be.a)(a)),a}return Object(Fe.a)(t,e),Object(Pe.a)(t,[{key:"handleRegUpdate",value:function(e,t){if(void 0!==e&&t){var a=this.props,n=a.tournament;(0,a.patchRegistration)(n._pivot_id,Object(se.a)({},t,e))}}},{key:"render",value:function(){var e=this,t=this.props,a=t.user,n=t.tournament,o=t.isAdmin,l=t.authenticatedUserId,c=t.userList,s=t.match.params.id;if(!a||!n)return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h2",{className:"py-4"},"Registration not found. You might not have permission to see this registration."));var i=Object.keys(S).find((function(e){return S[e]===n._pivot_attended}))||"",u=n.startDate?ge()(n.startDate).format("DD.MM.YYYY"):"",p=n.endDate?ge()(n.endDate).format("DD.MM.YYYY"):"",f=c.find((function(e){return e.id===n._pivot_partner1})),b=c.find((function(e){return e.id===n._pivot_partner2})),g=1===n._pivot_attended?"none":null,E=D.find((function(e){return e.id===n._pivot_success}));E&&(g=E.label);var h=[{header:"User",field:a.firstName&&a.lastName?"".concat(a.firstName," ").concat(a.lastName):null},{header:"Tournament",field:n.name},{header:"Date",field:n.startDate&&n.startDate?"".concat(u," - ").concat(p):null},{header:"Role",field:n._pivot_role,editType:et.Type.SELECT,fieldName:"role",options:[{id:"judge",label:"judge"},{id:"speaker",label:"speaker"}]},{header:"Team Name",field:n._pivot_teamname,editType:et.Type.TEXT,fieldName:"teamname"},{header:"Comment",field:n._pivot_comment,editType:et.Type.TEXT,fieldName:"comment"},{header:"Independent",field:n._pivot_is_independent?"Yes":"No",editType:et.Type.CHECKBOX,fieldValue:n._pivot_is_independent,fieldName:"is_independent"},{header:"Funding",field:n._pivot_funding?"Yes":"No",editType:et.Type.CHECKBOX,fieldValue:n._pivot_funding,fieldName:"funding"},{header:"Costs",field:1===n._pivot_attended?r.a.createElement(ve.a,{quantity:parseFloat(n._pivot_price_owed,10)||0,currency:"EUR"}):null,fieldValue:n._pivot_price_owed||0,editType:et.Type.TEXT,fieldName:"price_owed",adminOnlyEdit:!0},{header:"Price paid",field:1===n._pivot_attended?r.a.createElement(ve.a,{quantity:parseFloat(n._pivot_price_paid,10)||0,currency:"EUR"}):null,fieldValue:n._pivot_price_paid||0,editType:et.Type.TEXT,fieldName:"price_paid",adminOnlyEdit:!0},{header:"Debt",field:1===n._pivot_attended?r.a.createElement("span",{className:n._pivot_price_owed-n._pivot_price_paid>0?"text-danger":null},r.a.createElement(ve.a,{quantity:parseFloat(n._pivot_price_owed-n._pivot_price_paid,10)||0,currency:"EUR"})):null},{header:"Status",field:i,editType:et.Type.SELECT,fieldValue:n._pivot_attended,fieldName:"attended",options:Object.keys(S).map((function(e){return{id:S[e],label:e}})),adminOnlyEdit:!0},{header:"Success",field:g,editType:et.Type.SELECT,fieldValue:n._pivot_success,fieldName:"success",options:D},{header:"Points",field:1===n._pivot_attended?n._pivot_points:null},{header:"opd"===n.format.toLowerCase()?"Partner 1":"Partner",field:f?"".concat(f.firstName," ").concat(f.name):D.reduce((function(e,t){var a=t.canHavePartner,n=t.id;return a?[].concat(Object(m.a)(e),[n]):e}),[]).includes(n._pivot_success)?"":null,fieldName:"partner1",fieldValue:n._pivot_partner1,editType:et.Type.SELECT,options:[{id:null,label:""}].concat(Object(m.a)(c.map((function(e){var t=e.firstName,a=e.name;return{id:e.id,label:"".concat(t," ").concat(a)}}))))},{header:"Partner 2",field:"opd"===n.format.toLowerCase()?b?"".concat(b.firstName," ").concat(b.name):D.reduce((function(e,t){var a=t.canHavePartner,n=t.id;return a?[].concat(Object(m.a)(e),[n]):e}),[]).includes(n._pivot_success)?"":null:null,fieldName:"partner2",fieldValue:n._pivot_partner2,editType:et.Type.SELECT,options:[{id:null,bel:""}].concat(Object(m.a)(c.map((function(e){var t=e.firstName,a=e.name;return{id:e.id,label:"".concat(t," ").concat(a)}}))))},{header:"Transaction from",field:1===n._pivot_attended?n._pivot_transaction_from||"":null,fieldName:"transaction_from",fieldValue:n.transaction_from,editType:et.Type.TEXT,adminOnly:!0,adminOnlyEdit:!0},{header:"Transaction date",field:1===n._pivot_attended?n._pivot_transaction_date||"":null,fieldName:"transaction_date",fieldValue:n.transaction_date,editType:et.Type.TEXT,adminOnly:!0,adminOnlyEdit:!0}].filter((function(e){var t=e.field,a=e.adminOnly;return null!==t&&(!a||o)}));return r.a.createElement("div",{id:"registration",className:"container page-content"},a&&a.tournaments&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-9 col-lg-7 col-xl-6 offset-md-1"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("h2",{className:"py-4 mr-4"},"Registration",s),(o||l===n._pivot_user_id)&&r.a.createElement("button",{className:"btn btn-outline-danger",type:"button",disabled:n._pivot_attended===S.Went},"Delete")),r.a.createElement(ye.a,{bootstrap4:!0,keyField:"id",data:h.map((function(e,t){return Object(d.a)({id:t},e)})),columns:[{dataField:"header",text:"",style:{fontWeight:"bold"},editable:!1},{dataField:"field",text:"",editorRenderer:function(t,a,n){var o=n.editType,l=n.options,c=n.fieldName,s=n.fieldValue;return o?r.a.createElement(nt,{fieldName:c,fieldValue:s,type:o,value:a.props&&a.props.quantity?a.props.quantity:a,options:l,handleChange:e.handleRegUpdate}):null}}],cellEdit:tt()({mode:"click",blurToSave:!0,nonEditableRows:function(){return h.reduce((function(e,t,n){var r=t.adminOnlyEdit,c=t.editType;return o||l===a.id?!o&&r?[].concat(Object(m.a)(e),[n]):c?e:[].concat(Object(m.a)(e),[n]):[].concat(Object(m.a)(e),[n])}),[])}}),bordered:!1}))))}}]),t}(n.Component),ct=Object(s.b)((function(e,t){var a=e.user,n=t.match.params.id,r=a.users.find((function(e){var t=e.tournaments;return t&&t.find((function(e){return e._pivot_id===parseInt(n,10)}))}));return{isAdmin:!!a.authenticatedUserId&&1===a.users.find((function(e){var t=e.id;return a.authenticatedUserId===t})).position,authenticatedUserId:a.authenticatedUserId,user:r,userList:a.users,tournament:r?r.tournaments.find((function(e){return e._pivot_id===parseInt(n,10)})):null}}),ot)(lt),st=a(513),it=function(){var e=Object(s.c)();return r.a.createElement("div",{className:"col-12 col-md-8 col-lg-7 col-xl-5 px-0 pb-4"},r.a.createElement("h2",null,"Report an issue"),r.a.createElement("form",{onSubmit:function(t){var a,n,r,o,l,c;return C.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(t.preventDefault(),a=t.target[0].value){s.next=4;break}return s.abrupt("return");case 4:return s.next=6,C.a.awrap(fetch("".concat(T,"/bugs"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST"},body:JSON.stringify({type:"-",description:a})}));case 6:if(200!==(n=s.sent).status){s.next=15;break}return s.next=10,C.a.awrap(n.json());case 10:r=s.sent,(o=r.bug)&&e({type:p,payload:{newBug:o}}),s.next=20;break;case 15:return s.next=17,C.a.awrap(n.json());case 17:l=s.sent,c=l.message,P(c,k.WARNING);case 20:case"end":return s.stop()}}))}},r.a.createElement("textarea",{className:"form-control my-2",placeholder:"Describe the issue you found",rows:"10"}),r.a.createElement("button",{type:"submit",className:"btn btn-outline-info"},"Report")))};var ut=Object(s.b)((function(e){var t=e.user,a=e.bug;return{isAdmin:!!t.authenticatedUserId&&1===t.users.find((function(e){var a=e.id;return t.authenticatedUserId===a})).position,users:t.users,bugList:a.bugList}}),(function(e){return{getBugList:function(){var t,a,n;return C.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,C.a.awrap(fetch("".concat(T,"/bugs"),{method:"GET",credentials:"include"}));case 2:if(200!==(t=r.sent).status){r.next=9;break}return r.next=6,C.a.awrap(t.json());case 6:a=r.sent,(n=a.data)&&e({type:"GET_ALL_BUGS",payload:{bugList:n}});case 9:case"end":return r.stop()}}))},setBugStatus:function(t,a){return C.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C.a.awrap(fetch("".concat(T,"/bugs/").concat(t),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"PUT"},body:JSON.stringify({status:a})}));case 2:200===n.sent.status&&e({type:"SET_BUG_STATUS",payload:{status:a,bugId:t}});case 4:case"end":return n.stop()}}))},deleteBug:function(t){return C.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,C.a.awrap(fetch("".concat(T,"/bugs/").concat(t),{method:"DELETE",credentials:"include"}));case 2:200===a.sent.status&&e({type:"REMOVE_BUG",payload:{bugId:t}});case 4:case"end":return a.stop()}}))}}}))((function(e){var t=e.bugList,a=e.isAdmin,n=e.users,o=e.setBugStatus,l=e.deleteBug,c=e.getBugList,s=r.a.useState(!1),i=Object(j.a)(s,2),u=i[0],m=i[1];return r.a.useEffect((function(){a&&!rt&&(c(),rt=!0)}),[a,c]),r.a.createElement("div",{className:"container-fluid page-content"},r.a.createElement(it,null),a&&t.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"pb-4"},"Bug List"),r.a.createElement(ye.a,{bootstrap4:!0,keyField:"id",data:u?t:t.filter((function(e){return!e.status})),columns:[{dataField:"description",text:"Description",sort:!0},{dataField:"created_at",text:"Created at",sort:!0,headerStyle:function(){return{maxWidth:"160px"}},formatter:function(e){return ge()(e).format(R)}},{dataField:"user_id",text:"Reported by",isDummyField:!0,sort:!0,headerStyle:function(){return{maxWidth:"160px"}},formatter:function(e,t){var a=t.user_id,r=n.find((function(e){return e.id===a}));return r&&r.lastName&&r.firstName?"".concat(r.firstName," ").concat(r.lastName):null}},{dataField:"status",text:"Status",isDummyField:!0,sort:!0,headerStyle:function(){return{maxWidth:"100px"}},formatter:function(e,t){var a=t.id,n=t.status;return n?r.a.createElement(st.a,{role:"button",onClick:function(){o(a,n?0:1)}}):r.a.createElement(Ue.a,{role:"button",onClick:function(){o(a,n?0:1)}})}},{dataField:"",text:"",isDummyField:!0,sort:!1,headerStyle:function(){return{maxWidth:"80px"}},formatter:function(e,t){var a=t.id;return r.a.createElement("button",{type:"button",className:"btn btn-outline-danger",onClick:function(){return l(a)}},r.a.createElement(_e.a,null))}}],defaultSorted:[{dataField:"created_at",order:"desc"}],bordered:!1}),r.a.createElement("div",{className:"d-flex align-items-center flex-column flex-sm-row mt-4"},r.a.createElement("button",{type:"button",className:"btn btn-outline-info",onClick:function(){m(!u)}},u?"Hide ":"Show ","resolved issues"))):null)})),mt=a(18),dt=a(514),pt=a(515),ft=function(e){var t=e.title,a=e.number,n=e.percentageChange,o=n?Math.round(100*(n-1)):null;return r.a.createElement("div",{className:"box"},r.a.createElement("small",{className:"number-card-title"},t),r.a.createElement("span",{className:"d-flex justify-content-center align-items-center"},r.a.createElement("b",{className:"number"},a),o&&r.a.createElement("b",{className:"ml-2 ".concat(o>0?"text-success":"text-danger")},o>0&&"+",o,"%",o>0?r.a.createElement(dt.a,{className:"ml-1"}):r.a.createElement(pt.a,{className:"ml-1"}))))};ft.defaultProps={percentageChange:void 0};var bt=ft,gt=(a(490),["#00C49F","#FFBB28","#FF8042"]),Et=function(){var e=Object(s.d)((function(e){return{users:e.user.users,tournaments:e.tournament.tournamentList}})),t=e.users,a=e.tournaments,o=Object(n.useState)([]),l=Object(j.a)(o,2),c=l[0],i=l[1];Object(n.useEffect)((function(){!function(){var e,t,a;C.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C.a.awrap(fetch("".concat(T,"/clubDebt"),{method:"GET",credentials:"include"}));case 2:if(200===(e=n.sent).status){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,C.a.awrap(e.json());case 7:t=n.sent,(a=t.data).length&&i(a);case 10:case"end":return n.stop()}}))}()}),[]);var u=Math.min.apply(Math,Object(m.a)(a.map((function(e){var t=e.startDate;return ge()(t).valueOf()})))),d=t.length,p=t.filter((function(e){return e.tournaments.filter((function(e){return ge()(e.startDate).isAfter(ge()().subtract(1,"years"))})).length})),f=t.filter((function(e){return e.tournaments.filter((function(e){return ge()(e.startDate).isAfter(ge()().subtract(2,"years"))&&ge()(e.startDate).isBefore(ge()().subtract(1,"years"))})).length})),b=t.filter((function(e){return e.tournaments.filter((function(e){return ge()(e.startDate).isAfter(ge()())})).length})).length,g=Object(m.a)(Array(Math.round(Math.abs(ge.a.duration(ge()(u).diff(ge()())).asDays())/7)).keys()).map((function(e){var t=ge()(u).add(7*e-1,"days");return{date:t.toISOString(),count:a.filter((function(e){var a=e.startDate,n=e.users;return ge()(a).isBefore(t)&&n.some((function(e){var t=e._pivot_success;return["win","win2","winESL","win2ESL"].includes(t)}))})).length}})),E=["m","f","-"].map((function(e){return{name:e,value:p.filter((function(t){return t.gender===e})).length}}));return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{id:"dashboard"},r.a.createElement(bt,{title:"Total members",number:d}),r.a.createElement(bt,{title:"Active members 12m",number:p.length,percentageChange:p.length/f.length}),r.a.createElement("div",{className:"box cell-size-3x3 pl-0 pr-3 pt-2 pb-0"},r.a.createElement("h5",{className:"py-0 px-4 align-self-start"},"Member Debt"),r.a.createElement(mt.g,{width:"100%",height:200},r.a.createElement(mt.b,{data:c.map((function(e){var t=Object(j.a)(e,2);return{x:t[0],Debt:t[1]}}))},r.a.createElement(mt.a,{type:"monotone",dataKey:"Debt",stroke:"#59D4BB",fill:"#59D4BB",dot:!1}),r.a.createElement(mt.c,{strokeDasharray:"3 3"}),r.a.createElement(mt.i,{dataKey:"x",tick:{fontSize:"x-small"},tickFormatter:function(e){return ge()(e,"YYYYDDMM").format("MMM YY")}}),r.a.createElement(mt.j,{unit:"\u20ac",tick:{fontSize:"x-small"}}),r.a.createElement(mt.h,{formatter:function(e){return r.a.createElement(ve.a,{quantity:e,currency:"EUR"})},labelFormatter:function(e){return ge()(e).format("DD/MM/YYYY")}})))),r.a.createElement("div",{className:"box cell-size-3x2 pl-0 pr-3 pt-2 pb-0"},r.a.createElement("h5",{className:"py-0 px-4 align-self-start"},"Total Victories: "),r.a.createElement(mt.g,{width:"100%",height:200},r.a.createElement(mt.b,{data:g},r.a.createElement(mt.a,{type:"monotone",dataKey:"count",stroke:"#EB91A3",fill:"#EB91A3",dot:!1}),r.a.createElement(mt.c,{strokeDasharray:"3 3"}),r.a.createElement(mt.i,{tickFormatter:function(e){return ge()(e).format("MMM YY")},dataKey:"date",tick:{fontSize:"x-small"}}),r.a.createElement(mt.j,{tick:{fontSize:"x-small"}})))),r.a.createElement("div",{className:"box"},r.a.createElement("b",null,p.length),r.a.createElement("small",null,"Active Members*")),r.a.createElement("div",{className:"box cell-size-1x2"},r.a.createElement(mt.g,{width:"100%",height:150},r.a.createElement(mt.f,{width:150,height:150},r.a.createElement(mt.e,{dataKey:"value",data:E,innerRadius:40,outerRadius:80,startAngle:180,endAngle:0,cy:130,label:function(e){var t=e.percent;return"".concat(Math.round(100*t),"%")},labelLine:!1},E.map((function(e,t){return r.a.createElement(mt.d,{fill:gt[t%gt.length],key:e.name})}))),r.a.createElement(mt.h,null))),r.a.createElement("small",null,"Active Users")),r.a.createElement("div",{className:"box"},"4"),r.a.createElement("div",{className:"box"},"4"),r.a.createElement("div",{className:"box"},r.a.createElement("b",null,b),r.a.createElement("small",null,"Registered Members*"))))},ht=(a(491),a(492),function(e){var t=e.isOpen,a=e.closeModal,n=e.handleAddedWikiLink,o=e.isLoading,l=void 0!==o&&o;de.a.setAppElement(".app");return r.a.createElement(de.a,{isOpen:t,className:"wikiLinks-creator-modal",shouldCloseOnOverlayClick:!0,onRequestClose:a},r.a.createElement("h2",{className:"mb-3"},"Add a New Link to a Document"),l&&r.a.createElement(Oe,null),!l&&r.a.createElement("form",{onSubmit:function(e){var t,a,r,o;return C.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e.preventDefault(),t=new FormData(e.target),a=JSON.stringify(Object.fromEntries(t)),l.next=5,C.a.awrap(fetch("".concat(T,"/wikiLinks"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST"},body:a}));case 5:return r=l.sent,l.next=8,C.a.awrap(r.json());case 8:o=l.sent,200===r.status?(P(o.message,k.SUCCESS),n()):P(o.message,k.WARNING);case 10:case"end":return l.stop()}}))}},r.a.createElement("div",{className:"wiki-links-form"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",className:"form-control",name:"title",autoComplete:"title",placeholder:"A Short Title",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"topic"},"Topic"),r.a.createElement("input",{type:"text",className:"form-control",name:"topic",autoComplete:"topic",placeholder:"one word topic",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"url"},"Link"),r.a.createElement("input",{type:"text",className:"form-control",name:"url",autoComplete:"url",placeholder:"full link to document",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{rows:"4",className:"form-control",name:"description",autoComplete:"description",placeholder:"Describe purpose and contents of the linked document",required:!0}))),r.a.createElement("button",{type:"submit",className:"btn btn-outline-success mr-3"},"Add Link"),r.a.createElement("button",{className:"btn btn-outline-dark mr-3",type:"button",onClick:a},"Close")))});var vt=Object(s.b)((function(e){var t=e.user;return{isAdmin:!!t.authenticatedUserId&&1===t.users.find((function(e){var a=e.id;return t.authenticatedUserId===a})).position}}))((function(e){var t=e.isAdmin,a=[{dataField:"id",text:"ID",hidden:!0},{dataField:"title",text:"Title",sort:!0,style:{wordBreak:"break-word"}},{dataField:"url",text:"Link",style:{wordBreak:"break-word"},formatter:function(e,t){return r.a.createElement("a",{href:t.url,target:"_blank"},"Open Document")}},{dataField:"topic",text:"Topic",sort:!0,classes:"d-none d-lg-table-cell",headerClasses:"d-none d-lg-table-cell",formatter:function(e,t){return t.topic.toUpperCase()}},{dataField:"created_at",isDummyField:!0,text:"Added to Collection",sort:!0,sortFunc:function(e,t,a){return"asc"===a?ge()(e).isAfter(ge()(t))?1:ge()(e).isBefore(ge()(t))?-1:0:ge()(e).isAfter(ge()(t))?-1:ge()(e).isBefore(ge()(t))?1:0},formatter:function(e,t){return"".concat(ge()(t).format(R))}}],o=Object(n.useState)([]),l=Object(j.a)(o,2),c=l[0],s=l[1],i=Object(n.useState)(!1),u=Object(j.a)(i,2),m=u[0],d=u[1];function p(){var e,t,a;return C.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C.a.awrap(fetch("".concat(T,"/wikiLinks"),{method:"GET",credentials:"include"}));case 2:if(200!==(e=n.sent).status){n.next=9;break}return n.next=6,C.a.awrap(e.json());case 6:t=n.sent,(a=t.data)&&s(a);case 9:case"end":return n.stop()}}))}Object(n.useEffect)((function(){p()}),[]);var f={renderer:function(e){return r.a.createElement("div",null,r.a.createElement("p",null,e.description),r.a.createElement("p",null,"URL:"," ",r.a.createElement("a",{href:e.url,target:"_blank"},e.url)),r.a.createElement("button",{onClick:function(){b(e.id)},type:"button",className:"btn btn-outline-danger ml-2"},"Delete"))},onlyOneExpanding:!1,onExpand:function(e,t,a,n){if(t){var r=n.target;if(!r)return;setTimeout((function(){r.scrollIntoView({behavior:"smooth",block:"start"})}),1)}}},b=function(e){Object(Ee.confirmAlert)({title:"Confirm",message:"Are you sure you want to delete this link?",buttons:[{label:"Yes",class:"btn btn-success",onClick:function(){return function(e){var t,a;return C.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C.a.awrap(fetch("".concat(T,"/wikiLinks/").concat(e),{method:"DELETE",credentials:"include"}));case 2:return t=n.sent,n.next=5,C.a.awrap(t.json());case 5:a=n.sent,200===t.status?(P(a.message,k.SUCCESS),p()):P(a.message,k.WARNING);case 7:case"end":return n.stop()}}))}(e)}},{label:"No",onClick:function(){}}]})};return r.a.createElement("div",{className:"container-fluid page-content"},r.a.createElement("h2",{className:"mb-4"},"HowTos, Templates, Documents"),r.a.createElement("p",null,"Find a selection of HowTos, Templates and other documents that are usefull for debating."),t?r.a.createElement("p",null,"As an admin, you can add new links to documents:",r.a.createElement("button",{className:"btn btn-outline-success ml-3",type:"button",onClick:function(){d(!0)}},"Add Document"),r.a.createElement(ht,{isOpen:m,closeModal:function(){d(!1)},handleAddedWikiLink:function(){p(),d(!1)}})):null,r.a.createElement("p",null),r.a.createElement(ye.a,{bootstrap4:!0,hover:!0,keyField:"id",data:c,columns:a,defaultSorted:[{dataField:"created_at",order:"desc"}],rowClasses:"cursorPointer",expandRow:f,bordered:!1}))})),Nt=Object(x.g)((function(e){var t=e.history,a=Object(s.c)();Object(n.useEffect)((function(){a(M())}),[a]);var o=Object(s.d)((function(e){var t=e.user;return Object(d.a)({},t,{authenticatedUser:t.authenticatedUserId?t.users.find((function(e){var a=e.id;return t.authenticatedUserId===a})):{}})})),l=o.isAuthenticated,c=o.authenticatedUser;if(!o.authCheckHasFinished)return r.a.createElement("div",{className:"app"},r.a.createElement(ne,{history:t}),r.a.createElement("main",{className:"mainContent d-flex justify-content-center align-items-center"},r.a.createElement(Oe,{xl:!0})),r.a.createElement(re,null));var i=function(e){var t=e.component,a=Object(_.a)(e,["component"]);return r.a.createElement(x.b,Object.assign({},a,{render:function(e){return l?r.a.createElement(x.a,{to:"/"}):r.a.createElement(t,e)}}))},u=function(e){var t=e.component,a=Object(_.a)(e,["component"]);return r.a.createElement(x.b,Object.assign({},a,{render:function(e){return l?r.a.createElement(t,e):r.a.createElement(x.a,{to:"/login"})}}))},m=function(e){var t=e.component,a=Object(_.a)(e,["component"]);return r.a.createElement(x.b,Object.assign({},a,{render:function(e){return l&&c.position?r.a.createElement(t,e):r.a.createElement(x.a,{to:"/login"})}}))};return r.a.createElement("div",{className:"app"},r.a.createElement(ne,{isAuthenticated:l,authenticatedUser:c,history:t}),r.a.createElement("main",{className:"mainContent",style:{padding:["/login","/signup"].includes(t.location.pathname)?0:""}},r.a.createElement(x.d,null,r.a.createElement(i,{path:"/login",component:ce}),r.a.createElement(i,{path:"/signup",component:ue}),r.a.createElement(x.b,{path:"/bug",component:ut}),r.a.createElement(u,{exact:!0,path:"/tournament",component:Je}),r.a.createElement(m,{path:"/tournament/:id",component:Ke}),r.a.createElement(u,{path:"/registration/:id",component:ct}),r.a.createElement(u,{path:"/dashboard",component:Et}),r.a.createElement(u,{path:"/wikiLinks",component:vt}),r.a.createElement(m,{path:"/createTournament",component:Xe}),r.a.createElement(m,{path:"/member",component:Ze}),r.a.createElement(u,{path:"/edit",component:Te}),r.a.createElement(u,{path:"/home",component:je}),r.a.createElement(u,{path:"/",component:Je}))),r.a.createElement(re,null),r.a.createElement(w.NotificationContainer,null))})),yt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function _t(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(493),a(494),a(495);l.a.render(r.a.createElement(s.a,{store:y},r.a.createElement(c.a,{basename:""},r.a.createElement(Nt,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");yt?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):_t(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):_t(t,e)}))}}()}},[[229,1,2]]]);
//# sourceMappingURL=main.fe751af8.chunk.js.map